{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { mimeType } from \"./mime-type.validator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../post.service\";\nimport * as i2 from \"src/app/auth/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/progress-spinner\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/button\";\n\nfunction PostCreateComponent_mat_spinner_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction PostCreateComponent_mat_card_1_mat_error_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Missing Name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostCreateComponent_mat_card_1_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r4.imagePreview, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r4.form.value.name);\n  }\n}\n\nfunction PostCreateComponent_mat_card_1_mat_error_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Missing Description\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostCreateComponent_mat_card_1_mat_error_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Missing Content\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostCreateComponent_mat_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-card\");\n    i0.ɵɵelementStart(1, \"form\", 1);\n    i0.ɵɵlistener(\"submit\", function PostCreateComponent_mat_card_1_Template_form_submit_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.savePost();\n    });\n    i0.ɵɵelementStart(2, \"mat-card-content\");\n    i0.ɵɵelementStart(3, \"mat-form-field\");\n    i0.ɵɵelementStart(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 2);\n    i0.ɵɵtemplate(7, PostCreateComponent_mat_card_1_mat_error_7_Template, 2, 0, \"mat-error\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\");\n    i0.ɵɵelementStart(9, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function PostCreateComponent_mat_card_1_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r8);\n\n      const _r3 = i0.ɵɵreference(12);\n\n      return _r3.click();\n    });\n    i0.ɵɵtext(10, \"Upload\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 4, 5);\n    i0.ɵɵlistener(\"change\", function PostCreateComponent_mat_card_1_Template_input_change_11_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onImagePicked($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, PostCreateComponent_mat_card_1_div_13_Template, 2, 2, \"div\", 6);\n    i0.ɵɵelementStart(14, \"mat-form-field\");\n    i0.ɵɵelementStart(15, \"mat-label\");\n    i0.ɵɵtext(16, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"input\", 7);\n    i0.ɵɵtemplate(18, PostCreateComponent_mat_card_1_mat_error_18_Template, 2, 0, \"mat-error\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"mat-form-field\");\n    i0.ɵɵelementStart(20, \"mat-label\");\n    i0.ɵɵtext(21, \"Content\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"input\", 8);\n    i0.ɵɵtemplate(23, PostCreateComponent_mat_card_1_mat_error_23_Template, 2, 0, \"mat-error\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"mat-card-footer\");\n    i0.ɵɵelementStart(25, \"button\", 9);\n    i0.ɵɵtext(26, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"name\").invalid);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.imagePreview !== \"\" && ctx_r1.imagePreview && ctx_r1.form.get(\"image\").valid);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"description\").invalid);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"content\").invalid);\n  }\n}\n\nexport class PostCreateComponent {\n  // @Output() postCreated = new EventEmitter<Post>();\n  constructor(postService, authService, route) {\n    this.postService = postService;\n    this.authService = authService;\n    this.route = route;\n    this.post = {\n      id: \"\",\n      name: \"\",\n      description: \"\",\n      content: \"\",\n      imagePath: \"\",\n      creator: \"\"\n    };\n    this.form = new FormGroup({\n      'name': new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(8)]\n      }),\n      'description': new FormControl(null, {\n        validators: [Validators.required]\n      }),\n      'content': new FormControl(null, {\n        validators: [Validators.required]\n      }),\n      'image': new FormControl(null, {\n        validators: [Validators.required],\n        asyncValidators: [mimeType]\n      })\n    });\n    this.isLoading = false;\n  }\n\n  ngOnInit() {\n    this.authSub = this.authService.getAuthListener().subscribe(isAuth => {\n      this.isLoading = isAuth;\n    });\n    this.route.paramMap.subscribe(paramMaps => {\n      if (paramMaps.has(\"postId\")) {\n        this.postId = paramMaps.get(\"postId\");\n        console.log(this.postId);\n        this.postService.getOnePost(this.postId).subscribe(postData => {\n          this.post = {\n            id: postData._id,\n            name: postData.name,\n            description: postData.description,\n            content: postData.content,\n            imagePath: postData.imagePath,\n            creator: \"\"\n          };\n          this.form.setValue({\n            name: this.post.name,\n            description: this.post.description,\n            content: this.post.content,\n            image: this.post.imagePath\n          });\n          console.log(this.form);\n        });\n      } else {\n        this.postId = null;\n      }\n    });\n  }\n\n  onImagePicked(event) {\n    const file = event.target.files;\n    this.form.patchValue({\n      \"image\": file[0]\n    });\n    this.form.updateValueAndValidity();\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      this.imagePreview = reader.result;\n    };\n\n    reader.readAsDataURL(this.form.value.image);\n  }\n\n  savePost() {\n    if (this.form.invalid) return;\n    this.isLoading = true;\n\n    if (this.postId) {\n      this.isLoading = false;\n      const postUpdate = {\n        id: this.postId,\n        name: this.form.value.name,\n        description: this.form.value.description,\n        content: this.form.value.content,\n        imagePath: this.form.value.image,\n        creator: \"\"\n      };\n      this.postService.updatePost(postUpdate);\n    } else {\n      this.isLoading = false;\n      this.postService.addPost(this.form.value.name, this.form.value.description, this.form.value.content, this.form.value.image);\n    }\n\n    this.form.reset(); // this.postCreated.emit(post);\n  }\n\n  ngOnDestroy() {\n    this.authSub.unsubscribe();\n  }\n\n}\n\nPostCreateComponent.ɵfac = function PostCreateComponent_Factory(t) {\n  return new (t || PostCreateComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nPostCreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostCreateComponent,\n  selectors: [[\"app-post-create\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [3, \"formGroup\", \"submit\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", \"placeholder\", \"Enter Name...\"], [\"mat-stroked-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"type\", \"file\", 3, \"change\"], [\"filePicker\", \"\"], [\"class\", \"image-preview\", 4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"description\", \"placeholder\", \"Enter Description...\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"content\", \"placeholder\", \"Enter Content...\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"btn-test\"], [1, \"image-preview\"], [3, \"src\", \"alt\"]],\n  template: function PostCreateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, PostCreateComponent_mat_spinner_0_Template, 1, 0, \"mat-spinner\", 0);\n      i0.ɵɵtemplate(1, PostCreateComponent_mat_card_1_Template, 27, 5, \"mat-card\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n    }\n  },\n  directives: [i4.NgIf, i5.MatSpinner, i6.MatCard, i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.FormGroupDirective, i6.MatCardContent, i8.MatFormField, i8.MatLabel, i9.MatInput, i7.DefaultValueAccessor, i7.NgControlStatus, i7.FormControlName, i10.MatButton, i6.MatCardFooter, i8.MatError],\n  styles: [\".btn-test[_ngcontent-%COMP%]{\\r\\n  border-radius: 5px;\\r\\n  margin-left: 10px;\\r\\n}\\r\\n\\r\\nmat-form-field[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{\\r\\n  width: 100%;\\r\\n  height: auto;\\r\\n}\\r\\n\\r\\nmat-card[_ngcontent-%COMP%]{\\r\\n  padding:20px 40px;\\r\\n}\\r\\n\\r\\ninput[type=\\\"file\\\"][_ngcontent-%COMP%]{\\r\\n  visibility: hidden;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%]{\\r\\n  height: 5rem;\\r\\n  margin: 1rem 0;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\r\\n  height: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsWUFBWTtBQUNkIiwiZmlsZSI6InBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLXRlc3R7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG59XHJcblxyXG5tYXQtZm9ybS1maWVsZCxpbnB1dHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IGF1dG87XHJcbn1cclxuXHJcbm1hdC1jYXJke1xyXG4gIHBhZGRpbmc6MjBweCA0MHB4O1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwiZmlsZVwiXXtcclxuICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbn1cclxuXHJcbi5pbWFnZS1wcmV2aWV3e1xyXG4gIGhlaWdodDogNXJlbTtcclxuICBtYXJnaW46IDFyZW0gMDtcclxufVxyXG5cclxuLmltYWdlLXByZXZpZXcgaW1ne1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/Developer/OneDrive/Desktop/angular/app-post/src/app/posts/post-create/post-create.component.ts"],"names":["FormControl","FormGroup","Validators","mimeType","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","PostCreateComponent_mat_spinner_0_Template","rf","ctx","ɵɵelement","PostCreateComponent_mat_card_1_mat_error_7_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","PostCreateComponent_mat_card_1_div_13_Template","ctx_r4","ɵɵnextContext","ɵɵadvance","ɵɵproperty","imagePreview","ɵɵsanitizeUrl","form","value","name","PostCreateComponent_mat_card_1_mat_error_18_Template","PostCreateComponent_mat_card_1_mat_error_23_Template","PostCreateComponent_mat_card_1_Template","_r8","ɵɵgetCurrentView","ɵɵlistener","PostCreateComponent_mat_card_1_Template_form_submit_1_listener","ɵɵrestoreView","ctx_r7","savePost","ɵɵtemplate","PostCreateComponent_mat_card_1_Template_button_click_9_listener","_r3","ɵɵreference","click","PostCreateComponent_mat_card_1_Template_input_change_11_listener","$event","ctx_r10","onImagePicked","ctx_r1","get","invalid","valid","PostCreateComponent","constructor","postService","authService","route","post","id","description","content","imagePath","creator","validators","required","minLength","asyncValidators","isLoading","ngOnInit","authSub","getAuthListener","subscribe","isAuth","paramMap","paramMaps","has","postId","console","log","getOnePost","postData","_id","setValue","image","event","file","target","files","patchValue","updateValueAndValidity","reader","FileReader","onload","result","readAsDataURL","postUpdate","updatePost","addPost","reset","ngOnDestroy","unsubscribe","ɵfac","PostCreateComponent_Factory","t","ɵɵdirectiveInject","PostService","AuthService","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PostCreateComponent_Template","directives","NgIf","MatSpinner","MatCard","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatCardContent","MatFormField","MatLabel","MatInput","DefaultValueAccessor","NgControlStatus","FormControlName","MatButton","MatCardFooter","MatError","styles"],"mappings":"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","sourcesContent":["import { FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { mimeType } from \"./mime-type.validator\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../post.service\";\r\nimport * as i2 from \"src/app/auth/auth.service\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"@angular/material/progress-spinner\";\r\nimport * as i6 from \"@angular/material/card\";\r\nimport * as i7 from \"@angular/forms\";\r\nimport * as i8 from \"@angular/material/form-field\";\r\nimport * as i9 from \"@angular/material/input\";\r\nimport * as i10 from \"@angular/material/button\";\r\nfunction PostCreateComponent_mat_spinner_0_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"mat-spinner\");\r\n} }\r\nfunction PostCreateComponent_mat_card_1_mat_error_7_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-error\");\r\n    i0.ɵɵtext(1, \"Missing Name\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction PostCreateComponent_mat_card_1_div_13_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 10);\r\n    i0.ɵɵelement(1, \"img\", 11);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r4 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"src\", ctx_r4.imagePreview, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r4.form.value.name);\r\n} }\r\nfunction PostCreateComponent_mat_card_1_mat_error_18_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-error\");\r\n    i0.ɵɵtext(1, \"Missing Description\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction PostCreateComponent_mat_card_1_mat_error_23_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-error\");\r\n    i0.ɵɵtext(1, \"Missing Content\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction PostCreateComponent_mat_card_1_Template(rf, ctx) { if (rf & 1) {\r\n    const _r8 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"mat-card\");\r\n    i0.ɵɵelementStart(1, \"form\", 1);\r\n    i0.ɵɵlistener(\"submit\", function PostCreateComponent_mat_card_1_Template_form_submit_1_listener() { i0.ɵɵrestoreView(_r8); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.savePost(); });\r\n    i0.ɵɵelementStart(2, \"mat-card-content\");\r\n    i0.ɵɵelementStart(3, \"mat-form-field\");\r\n    i0.ɵɵelementStart(4, \"mat-label\");\r\n    i0.ɵɵtext(5, \"Name\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(6, \"input\", 2);\r\n    i0.ɵɵtemplate(7, PostCreateComponent_mat_card_1_mat_error_7_Template, 2, 0, \"mat-error\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(8, \"div\");\r\n    i0.ɵɵelementStart(9, \"button\", 3);\r\n    i0.ɵɵlistener(\"click\", function PostCreateComponent_mat_card_1_Template_button_click_9_listener() { i0.ɵɵrestoreView(_r8); const _r3 = i0.ɵɵreference(12); return _r3.click(); });\r\n    i0.ɵɵtext(10, \"Upload\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(11, \"input\", 4, 5);\r\n    i0.ɵɵlistener(\"change\", function PostCreateComponent_mat_card_1_Template_input_change_11_listener($event) { i0.ɵɵrestoreView(_r8); const ctx_r10 = i0.ɵɵnextContext(); return ctx_r10.onImagePicked($event); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(13, PostCreateComponent_mat_card_1_div_13_Template, 2, 2, \"div\", 6);\r\n    i0.ɵɵelementStart(14, \"mat-form-field\");\r\n    i0.ɵɵelementStart(15, \"mat-label\");\r\n    i0.ɵɵtext(16, \"Description\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(17, \"input\", 7);\r\n    i0.ɵɵtemplate(18, PostCreateComponent_mat_card_1_mat_error_18_Template, 2, 0, \"mat-error\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(19, \"mat-form-field\");\r\n    i0.ɵɵelementStart(20, \"mat-label\");\r\n    i0.ɵɵtext(21, \"Content\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(22, \"input\", 8);\r\n    i0.ɵɵtemplate(23, PostCreateComponent_mat_card_1_mat_error_23_Template, 2, 0, \"mat-error\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(24, \"mat-card-footer\");\r\n    i0.ɵɵelementStart(25, \"button\", 9);\r\n    i0.ɵɵtext(26, \"Save\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\r\n    i0.ɵɵadvance(6);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"name\").invalid);\r\n    i0.ɵɵadvance(6);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.imagePreview !== \"\" && ctx_r1.imagePreview && ctx_r1.form.get(\"image\").valid);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"description\").invalid);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"content\").invalid);\r\n} }\r\nexport class PostCreateComponent {\r\n    // @Output() postCreated = new EventEmitter<Post>();\r\n    constructor(postService, authService, route) {\r\n        this.postService = postService;\r\n        this.authService = authService;\r\n        this.route = route;\r\n        this.post = { id: \"\", name: \"\", description: \"\", content: \"\", imagePath: \"\", creator: \"\" };\r\n        this.form = new FormGroup({\r\n            'name': new FormControl(null, {\r\n                validators: [Validators.required, Validators.minLength(8)]\r\n            }),\r\n            'description': new FormControl(null, {\r\n                validators: [Validators.required]\r\n            }),\r\n            'content': new FormControl(null, {\r\n                validators: [Validators.required]\r\n            }),\r\n            'image': new FormControl(null, {\r\n                validators: [Validators.required],\r\n                asyncValidators: [mimeType]\r\n            })\r\n        });\r\n        this.isLoading = false;\r\n    }\r\n    ngOnInit() {\r\n        this.authSub = this.authService.getAuthListener().subscribe(isAuth => {\r\n            this.isLoading = isAuth;\r\n        });\r\n        this.route.paramMap.subscribe(paramMaps => {\r\n            if (paramMaps.has(\"postId\")) {\r\n                this.postId = paramMaps.get(\"postId\");\r\n                console.log(this.postId);\r\n                this.postService.getOnePost(this.postId).subscribe(postData => {\r\n                    this.post = { id: postData._id, name: postData.name, description: postData.description, content: postData.content, imagePath: postData.imagePath, creator: \"\" };\r\n                    this.form.setValue({ name: this.post.name, description: this.post.description, content: this.post.content, image: this.post.imagePath });\r\n                    console.log(this.form);\r\n                });\r\n            }\r\n            else {\r\n                this.postId = null;\r\n            }\r\n        });\r\n    }\r\n    onImagePicked(event) {\r\n        const file = event.target.files;\r\n        this.form.patchValue({ \"image\": file[0] });\r\n        this.form.updateValueAndValidity();\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            this.imagePreview = reader.result;\r\n        };\r\n        reader.readAsDataURL(this.form.value.image);\r\n    }\r\n    savePost() {\r\n        if (this.form.invalid)\r\n            return;\r\n        this.isLoading = true;\r\n        if (this.postId) {\r\n            this.isLoading = false;\r\n            const postUpdate = {\r\n                id: this.postId,\r\n                name: this.form.value.name,\r\n                description: this.form.value.description,\r\n                content: this.form.value.content,\r\n                imagePath: this.form.value.image,\r\n                creator: \"\"\r\n            };\r\n            this.postService.updatePost(postUpdate);\r\n        }\r\n        else {\r\n            this.isLoading = false;\r\n            this.postService.addPost(this.form.value.name, this.form.value.description, this.form.value.content, this.form.value.image);\r\n        }\r\n        this.form.reset();\r\n        // this.postCreated.emit(post);\r\n    }\r\n    ngOnDestroy() {\r\n        this.authSub.unsubscribe();\r\n    }\r\n}\r\nPostCreateComponent.ɵfac = function PostCreateComponent_Factory(t) { return new (t || PostCreateComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ActivatedRoute)); };\r\nPostCreateComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PostCreateComponent, selectors: [[\"app-post-create\"]], decls: 2, vars: 2, consts: [[4, \"ngIf\"], [3, \"formGroup\", \"submit\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", \"placeholder\", \"Enter Name...\"], [\"mat-stroked-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"type\", \"file\", 3, \"change\"], [\"filePicker\", \"\"], [\"class\", \"image-preview\", 4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"description\", \"placeholder\", \"Enter Description...\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"content\", \"placeholder\", \"Enter Content...\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"btn-test\"], [1, \"image-preview\"], [3, \"src\", \"alt\"]], template: function PostCreateComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, PostCreateComponent_mat_spinner_0_Template, 1, 0, \"mat-spinner\", 0);\r\n        i0.ɵɵtemplate(1, PostCreateComponent_mat_card_1_Template, 27, 5, \"mat-card\", 0);\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\r\n    } }, directives: [i4.NgIf, i5.MatSpinner, i6.MatCard, i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.FormGroupDirective, i6.MatCardContent, i8.MatFormField, i8.MatLabel, i9.MatInput, i7.DefaultValueAccessor, i7.NgControlStatus, i7.FormControlName, i10.MatButton, i6.MatCardFooter, i8.MatError], styles: [\".btn-test[_ngcontent-%COMP%]{\\r\\n  border-radius: 5px;\\r\\n  margin-left: 10px;\\r\\n}\\r\\n\\r\\nmat-form-field[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{\\r\\n  width: 100%;\\r\\n  height: auto;\\r\\n}\\r\\n\\r\\nmat-card[_ngcontent-%COMP%]{\\r\\n  padding:20px 40px;\\r\\n}\\r\\n\\r\\ninput[type=\\\"file\\\"][_ngcontent-%COMP%]{\\r\\n  visibility: hidden;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%]{\\r\\n  height: 5rem;\\r\\n  margin: 1rem 0;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\r\\n  height: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsWUFBWTtBQUNkIiwiZmlsZSI6InBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLXRlc3R7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG59XHJcblxyXG5tYXQtZm9ybS1maWVsZCxpbnB1dHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IGF1dG87XHJcbn1cclxuXHJcbm1hdC1jYXJke1xyXG4gIHBhZGRpbmc6MjBweCA0MHB4O1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwiZmlsZVwiXXtcclxuICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbn1cclxuXHJcbi5pbWFnZS1wcmV2aWV3e1xyXG4gIGhlaWdodDogNXJlbTtcclxuICBtYXJnaW46IDFyZW0gMDtcclxufVxyXG5cclxuLmltYWdlLXByZXZpZXcgaW1ne1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG4iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}